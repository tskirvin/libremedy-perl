#!/usr/bin/perl
# Copyright and license are in the documentation below.

##############################################################################
### Configuration
##############################################################################

our %PROGS = (
        'assign'  => "/usr/bin/remedy-assign",
        'close'   => "/usr/bin/remedy-close",
        'list'    => "/usr/bin/remedy-list",
        'ticket'  => "/usr/bin/remedy-ticket",
        'worklog' => "/usr/bin/remedy-worklog",
);

##############################################################################
### Declarations
##############################################################################

use strict;
use warnings;

use Pod::Usage;

##############################################################################
### main ()
##############################################################################

$|++;       # Flush output

my ($prog, @args) = @ARGV;

if (my $run = $PROGS{lc $prog}) { exec ($run, lc $prog, @args) }
else                            { pod2usage (-verbose => 2) }

##############################################################################
### Documentation
##############################################################################

=head1 NAME

remedy-wrapper - wrapper script for remedy scripts

=head1 SYNOPSIS

B<remctl tools remedy> assign [opts] I<tkt> 

B<remctl tools remedy> close [opts] I<tkt> I<text>

B<remctl tools remedy> list [opts]

B<remctl tools remedy> ticket [opts] I<tkt> I<type>

B<remctl tools remedy> worklog I<tkt> I<text>

=head1 DESCRIPTION

remedy-wrapper is a wrapper script for the various remedy-* scripts.

=head1 EXAMPLES

The following are all assuming invocation on 'tools'.

=over 4

=item B<remctl tools remedy> ticket INC000000804714

Prints basic information about the ticket - the requester, who it has been
assigned to, resolution information, and a summary of the associated work
log entries.  Run 'remctl tools remedy ticket -h' for more information.

=item B<remctl tools remedy> list -t group -u "ITS Unix Systems"

Offers a list of open and/or closed tickets based on group, submitter, or
assigned person.  Run 'remctl tools remedy list -h' for more information.

=item B<remctl tools remedy> close INC000000804714 "problem solved"

Closes the given ticket.

=item B<remctl tools remedy> assign -u tskirvin INC000000804714

Assigns the ticket to a given SUNetID.

=item B<remctl tools remedy> worklog INC000000804714 "current status is fish"

Adds a worklog entry for the given ticket.

=back

For all types, you can run '-h' after the wrapper type to get more usage
information about that sub-script - ie 'remctl tools remedy worklog -h' will
retrieve information about the remedy-worklog script.

=cut

=head1 REQUIREMENTS

B<Remedy>

=head1 HOMEPAGE

[...]

=head1 AUTHOR

Tim Skirvin <tskirvin@stanford.edu>

=head1 LICENSE

Copyright 2008-2009 Board of Trustees, Leland Stanford Jr. University

This program is free software; you may redistribute it and/or modify
it under the same terms as Perl itself.

=cut
